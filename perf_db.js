// ==========================================
// ✈️ A330-300 (GE CF6) 性能資料庫 (KG/FT + Atmosphere)
// ==========================================

window.perfDB = {
    // --------------------------------------
    // 1. 起飛速度表 (Takeoff Speeds) [KG]
    // --------------------------------------
    takeoff_speeds: [
        [130000, 122, 125, 130],
        [140000, 128, 132, 136],
        [150000, 133, 137, 141],
        [160000, 138, 142, 146],
        [170000, 143, 146, 151],
        [180000, 147, 150, 155],
        [190000, 151, 155, 159],
        [200000, 155, 159, 163],
        [210000, 159, 163, 168],
        [220000, 163, 167, 172],
        [230000, 166, 171, 176],
        [235000, 168, 173, 179],
        [242000, 170, 175, 181]
    ],

    // --------------------------------------
    // 2. 構型修正
    // --------------------------------------
    conf_correction: {
        "1+F": { v1: 0, vr: 0, v2: 0 },
        "2":   { v1: -3, vr: -3, v2: -2 },
        "3":   { v1: -6, vr: -6, v2: -5 }
    },

    // --------------------------------------
    // 3. 降落速度表 [KG]
    // --------------------------------------
    landing_vls_full: [
        [130000, 122],
        [140000, 126],
        [150000, 130],
        [160000, 134],
        [170000, 138],
        [180000, 142],
        [190000, 146],
        [200000, 150],
        [210000, 154],
        [230000, 162]
    ],
    landing_conf3_add: 4,

    // --------------------------------------
    // 4. Flex 參數 (含大氣修正係數)
    // --------------------------------------
    flex_data: {
        base_temp: 46,        // 稍微調高基準值，讓低海拔/標準天氣有更多減推力空間
        max_temp: 68,         // GE CF6 的典型上限
        mtow: 242000,         // KG
        slope_weight: 0.0006, // 每輕 1KG 獎勵 (度)
        slope_runway: 0.003,  // 每多 1FT 獎勵 (度)
        
        // [New] 大氣與環境修正
        // 高度越高，空氣越稀薄，推力越小，Flex 必須減少 (靠近 TOGA)
        elev_penalty: 2.5,    // 每上升 1000ft，Flex 扣除 2.5度
        
        // 溫度越高，空氣越稀薄，引擎效能下降
        // 如果 OAT > ISA，代表比標準還熱，Flex 需進一步扣除
        delta_t_penalty: 0.5  // 每高於 ISA 1度，Flex 扣除 0.5度
    },

    // --------------------------------------
    // 5. Trim 物理模型
    // --------------------------------------
    trim_physics: {
        ref_cg: 29.0,
        step: 0.6,
        fuel_cg_effect: 0.00004, 
        deg_to_pct_factor: 8.0, 
        deg_to_pct_bias: 15.0
    },

    // --------------------------------------
    // 6. 基礎物理常數 [New]
    // --------------------------------------
    atmosphere: {
        isa_sea_level: 15,    // 海平面標準氣溫 15°C
        temp_lapse: 2         // 絕熱遞減率: 每上升 1000ft 氣溫下降 2°C
    }
};
