<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>A330 EFB v4.7</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="nav-header">
        A330 EFB <span style="font-size:12px; color:#00ff00;">v4.7</span>
        <button class="reset-btn" onclick="clearAllData()">RESET</button>
    </div>

    <div id="tab-generator" class="tab-content">
        <div class="perf-card">
            <div class="perf-title">CAREER STATUS</div>
            <div id="gen-status-text" style="font-size:14px; margin-bottom:10px; color:#ddd;">
                LOC: LSZH | HRS: 0.0 | MAINT: 0/500
            </div>
            
            <div class="input-group">
                <label>HOME BASE</label>
                <select id="base-select">
                    <option value="LSZH">LSZH (Zurich)</option>
                    <option value="LSGG">LSGG (Geneva)</option>
                </select>
            </div>

            <div style="display:flex; gap:10px; margin-top:15px;">
                <button class="action-btn" onclick="startNewCareer()">‚ú® START NEW CAREER</button>
                <button id="btn-continue-career" class="action-btn" style="background:#444;" onclick="continueCareer()">‚ñ∂ CONTINUE</button>
            </div>
            
            <div id="gen-console" style="margin-top:15px; background:#000; padding:10px; height:150px; overflow-y:auto; font-family:monospace; font-size:11px; color:#0f0; border:1px solid #333;">
                > System Ready...
            </div>
        </div>
    </div>

    <div id="tab-roster" class="tab-content active">
        <div id="roster-list" style="padding-bottom: 80px;">
            <div style="text-align:center; padding:20px; color:#666;">
                NO ROSTER DATA<br>Please go to GEN tab to generate flights.
            </div>
        </div>
    </div>

    <div id="tab-dispatch" class="tab-content">
        <div class="perf-card">
            <div class="perf-title" id="dsp-flight">LX000 (LSZH-KJFK)</div>
            
            <div class="input-group">
                <label for="pax-count">PASSENGERS / CARGO</label>
                <input type="number" id="pax-count" readonly style="background:#222; color:#00bfff;">
            </div>
            
            <div class="two-col">
                <div class="input-group">
                    <label>CARGO FWD</label>
                    <input type="number" id="cargo-fwd" readonly>
                </div>
                <div class="input-group">
                    <label>CARGO AFT</label>
                    <input type="number" id="cargo-aft" readonly>
                </div>
            </div>

            <div class="two-col">
                <div class="input-group">
                    <label>BLOCK FUEL</label>
                    <input type="number" id="fuel-total" readonly style="color:#f1c40f;">
                </div>
                <div class="input-group">
                    <label>TRIP FUEL</label>
                    <input type="number" id="trip-fuel" readonly>
                </div>
            </div>

            <div id="dsp-warnings" style="margin:10px 0; min-height:20px;"></div>

            <button class="action-btn" onclick="forceNewDispatch()">üîÑ RE-CALCULATE LOADSHEET</button>
        </div>
    </div>

    <div id="tab-takeoff" class="tab-content">
        <div class="perf-card">
            <div class="perf-title" id="to-flight-title">NO FLIGHT SELECTED</div>
            
            <div class="input-group">
                <label>RUNWAY LENGTH (M)</label>
                <input type="number" id="to-rwy-len" value="3300">
            </div>

            <div class="two-col">
                <div class="input-group">
                    <label>RWY COND</label>
                    <select id="to-rwy-cond">
                        <option value="DRY">DRY</option>
                        <option value="WET">WET</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>SLOPE (%)</label>
                    <input type="number" id="to-rwy-slope" value="0" step="0.1">
                </div>
            </div>

            <div class="input-group">
                <label>OAT (¬∞C)</label>
                <input type="number" id="to-oat" placeholder="Enter Temp">
            </div>

            <div class="input-group" style="display:none;"> <span id="to-elev-disp">1416</span>
            </div>

            <div class="result-grid" style="margin-top:15px; padding:10px; background:#222; border-radius:8px;">
                <div class="res-item">
                    <span class="res-label">V1</span>
                    <span class="res-val" id="res-v1">---</span>
                </div>
                <div class="res-item">
                    <span class="res-label">VR</span>
                    <span class="res-val" id="res-v2">---</span>
                </div>
                <div class="res-item">
                    <span class="res-label">V2</span>
                    <span class="res-val" id="res-vr">---</span>
                </div>
                <div class="res-item">
                    <span class="res-label">TRIM</span>
                    <span class="res-val" id="res-trim">---</span>
                </div>
                <div class="res-item">
                    <span class="res-label">FLEX</span>
                    <span class="res-val" id="res-flex" style="color:#f1c40f;">---</span>
                </div>
            </div>
            
            <div style="margin-top:10px; text-align:right; font-size:12px; color:#aaa;">
                TOW: <span id="res-tow">---</span> KG
            </div>

            <button class="action-btn" onclick="calculateTakeoff()">CALCULATE PERFORMANCE</button>
        </div>

        <input type="hidden" id="pax-weight" value="0"> 
        </div>

    <div id="tab-landing" class="tab-content">
        <div class="perf-card">
            <div class="perf-title" id="ldg-flight-desc">ARRIVAL PERFORMANCE</div>
            
            <div class="input-group">
                <label>RUNWAY LENGTH (M)</label>
                <input type="number" id="ldg-rwy-len" value="3000">
            </div>

            <div class="two-col">
                <div class="input-group">
                    <label>RWY COND</label>
                    <select id="ldg-rwy-cond">
                        <option value="DRY">DRY</option>
                        <option value="WET">WET</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>REVERSERS</label>
                    <select id="ldg-rev">
                        <option value="YES">YES</option>
                        <option value="NO">NO</option>
                    </select>
                </div>
            </div>
            
            <div style="margin:10px 0; font-size:12px; color:#aaa;">
                EST LDW: <span id="res-ldw" style="color:#fff;">---</span>
            </div>

            <button class="action-btn" onclick="calculateLanding()">CALCULATE LANDING</button>

            <div class="perf-section" style="margin-top:20px;">
                </div>
        </div>
    </div>

    <div class="nav-bar">
        <button id="btn-generator" class="nav-btn" onclick="switchTab('generator')">
            <div style="font-size:16px;">üé≤</div>GEN
        </button>
        <button id="btn-roster" class="nav-btn active" onclick="switchTab('roster')">
            <div style="font-size:16px;">üìÖ</div>ROSTER
        </button>
        <button id="btn-dispatch" class="nav-btn" onclick="switchTab('dispatch')">
            <div style="font-size:16px;">üìù</div>DSP
        </button>
        <button id="btn-takeoff" class="nav-btn" onclick="switchTab('takeoff')">
            <div style="font-size:16px;">üõ´</div>PERF
        </button>
        <button id="btn-landing" class="nav-btn" onclick="switchTab('landing')">
            <div style="font-size:16px;">üõ¨</div>LDG
        </button>
    </div>

    <script src="weights.js"></script>
    <script src="airports.js"></script>
    <script src="routes.js"></script>
    <script src="perf_db.js"></script>
    <script src="app.js"></script>

</body>
</html>
