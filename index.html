<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>A330 EFB v4.7</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="nav-header">A330 EFB v4.7</div>
    
    <div class="nav-bar">
        <button class="nav-btn" id="btn-gen" onclick="switchTab('gen')">GEN</button>
        <button class="nav-btn active" id="btn-roster" onclick="switchTab('roster')">ROSTER</button>
        <button class="nav-btn" id="btn-dispatch" onclick="switchTab('dispatch')">DSP</button>
        <button class="nav-btn" id="btn-takeoff" onclick="switchTab('takeoff')">PERF TO</button>
        <button class="nav-btn" id="btn-landing" onclick="switchTab('landing')">PERF LDG</button>
    </div>

    <div id="tab-gen" class="tab-content">
        <div class="card">
            <div class="section-title">CAREER STATUS</div>
            <div id="gen-status-text" style="font-size:14px; margin-bottom:10px; color:#aaa;">
                NO DATA
            </div>
            
            <div class="input-group">
                <label>HOME BASE</label>
                <select id="base-select">
                    <option value="LSZH">LSZH (Zurich)</option>
                    <option value="LSGG">LSGG (Geneva)</option>
                </select>
            </div>

            <div style="display:flex; gap:10px; margin-top:15px;">
                <button class="action-btn" onclick="startNewCareer()">✨ START NEW CAREER</button>
                <button class="action-btn" id="btn-continue-career" onclick="continueCareer()" disabled>⏩ NEXT MONTH</button>
            </div>
            
            <div class="console-box" id="gen-console">
                <div>> SYSTEM READY</div>
            </div>
        </div>
    </div>

    <div id="tab-roster" class="tab-content active">
        <div id="roster-list">
            <div style="text-align:center; padding:20px; color:#666;">
                NO FLIGHTS LOADED<br>
                PLEASE GO TO [GEN] TAB
            </div>
        </div>
    </div>
    
    <div id="tab-dispatch" class="tab-content">
        <div class="card">
            <div class="section-title">FLIGHT DISPATCH</div>
            <div id="dsp-flight" style="font-size:18px; color:#00bfff; font-weight:bold; margin-bottom:15px;">
                NO FLIGHT SELECTED
            </div>

            <div id="dsp-warnings" style="margin-bottom:10px; min-height:5px;"></div>

            <button class="action-btn" onclick="forceNewDispatch()">GENERATE / RE-CALCULATE</button>

            <div class="separator"></div>

            <div class="input-group">
                <label for="pax-count">PASSENGERS</label>
                <input type="number" id="pax-count" onchange="saveInputs()">
            </div>
            
            <div class="input-group">
                <label>CARGO FWD (KG)</label>
                <input type="number" id="cargo-fwd" onchange="saveInputs()">
            </div>

            <div class="input-group">
                <label>CARGO AFT (KG)</label>
                <input type="number" id="cargo-aft" onchange="saveInputs()">
            </div>
            
            <div class="input-group">
                <label>BLOCK FUEL (KG)</label>
                <input type="number" id="fuel-total" onchange="saveInputs()">
            </div>

            <div class="input-group">
                <label>TRIP FUEL (KG)</label>
                <input type="number" id="trip-fuel" disabled style="background:#222; color:#aaa;">
            </div>

            <div class="result-box" style="margin-top:15px;">
                <div>MAC ZFW: <span id="res-mac-zfw" style="float:right">--</span></div>
                <div>TOW: <span id="res-tow" style="float:right">--</span></div>
            </div>
        </div>
    </div>

    <div id="tab-takeoff" class="tab-content">
        <div class="card">
            <div class="section-title">TAKEOFF PERFORMANCE</div>
            <div id="to-flight-title" style="color:#00bfff; margin-bottom:10px;">--</div>

            <div class="row">
                <div class="input-group half">
                    <label>RWY LEN (M)</label>
                    <input type="number" id="to-rwy-len" value="3500">
                </div>
                <div class="input-group half">
                    <label>ELEV (FT)</label>
                    <div id="to-elev-disp" style="padding:10px; background:#222; border-radius:4px; text-align:right;">0</div>
                </div>
            </div>

            <div class="row">
                <div class="input-group half">
                    <label>OAT (°C)</label>
                    <input type="number" id="to-oat" value="15">
                </div>
                <div class="input-group half">
                    <label>COND</label>
                    <select id="to-rwy-cond">
                        <option value="DRY">DRY</option>
                        <option value="WET">WET</option>
                    </select>
                </div>
            </div>

            <div class="input-group">
                <label>SLOPE (%)</label>
                <input type="number" id="to-rwy-slope" value="0.0" step="0.1">
            </div>

            <button class="action-btn" onclick="calculateTakeoff()">CALCULATE</button>

            <div class="perf-section">
                <div class="perf-row">
                    <span>V1</span><span class="perf-val" id="res-v1">--</span>
                </div>
                <div class="perf-row">
                    <span>VR</span><span class="perf-val" id="res-vr">--</span>
                </div>
                <div class="perf-row">
                    <span>V2</span><span class="perf-val" id="res-v2">--</span>
                </div>
                <div class="separator"></div>
                <div class="perf-row">
                    <span>TRIM</span><span class="perf-val" id="res-trim">--</span>
                </div>
                <div class="perf-row">
                    <span>FLEX</span><span class="perf-val" id="res-flex">--</span>
                </div>
            </div>
        </div>
    </div>

    <div id="tab-landing" class="tab-content">
        <div class="card">
            <div class="section-title">LANDING PERFORMANCE</div>
            <div id="ldg-flight-desc" style="color:#888; font-size:12px; margin-bottom:10px;">--</div>

            <div class="row">
                <div class="input-group half">
                    <label>RWY AVAIL (M)</label>
                    <input type="number" id="ldg-rwy-len" value="3000">
                </div>
                <div class="input-group half">
                    <label>REVERSER</label>
                    <select id="ldg-rev">
                        <option value="YES">YES</option>
                        <option value="NO">NO</option>
                    </select>
                </div>
            </div>

            <div class="input-group">
                <label>CONDITION</label>
                <select id="ldg-rwy-cond">
                    <option value="DRY">DRY</option>
                    <option value="WET">WET</option>
                </select>
            </div>

            <button class="action-btn" onclick="calculateLanding()">CALCULATE</button>

            <div class="result-box" style="margin-top:15px; text-align:center;">
                EST. LDW: <span id="res-ldw" style="color:#00bfff; font-weight:bold;">--</span>
            </div>

            <div class="perf-section"></div>
        </div>
    </div>

    <script src="weights.js"></script>
    <script src="airports.js"></script>
    <script src="perf_db.js"></script>
    <script src="routes.js"></script> 

    <script src="app.js"></script>

</body>
</html>
