<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>A330-300 EFB</title>
    <link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAMAAAAKE/YAAAAAbFBMVEUAAADjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgDjCgAAAADc0A/lAAAAI3RSTlMAGfCc7vO/gH+wPzC/r39gcGBfX14/MC8vL29vX19fX19fX19J15N5AAAEZUlEQVR42u3c6XbiOhSA4QyBQBodmjaF0vZ+3/+VFs4wQ7FkK7YkK3V9/5WzkCw/WfaSjXF9fX19fX19fX19fX19fX19fX19fX19fX19fX39/9T159v7+8fH+/v72/P19fXydv94//h4f76/f37V9X/W9e324/3j9e3t9fX5/Pj4eP/2/vz4fH97fX1/v/34Vdf/T9f3t/e3t+fH+/vH6+v7x8fb8/vbe13/T93e357fP5/v7+/P7+/Pj4/3t+f6/f/r29v7x/Pj4/3t+fH+/vH89l6v/5e6vb09Pz/eP96fnx/vH2/P9fr/Vbe3t/f3t/fn+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/vz+/v7/6/r/wO4gJ5C1X7n2AAAAABJRU5ErkJggg==">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <script src="roster.js"></script>
    <script src="perf_db.js"></script>
    <script src="weights.js"></script>
    <script src="airports.js"></script>

    <div class="nav-header">A330 OPT v27<button class="reset-btn" onclick="clearAllData()">RESET</button></div>

    <div class="content-container">
        <div id="tab-roster" class="tab-content active">
            <div id="roster-list"></div>
            <div style="text-align:center;color:#555;font-size:12px;margin-top:20px;">â€” END OF ROSTER â€”</div>
        </div>

        <div id="tab-takeoff" class="tab-content">
            <div class="current-flight-banner">
                <div style="font-size:12px;color:#aaa;">FLIGHT INFO</div>
                <div id="to-flight-title" style="color:#fff;font-weight:bold;">NO FLIGHT</div>
            </div>

            <div class="rwy-info-row" style="justify-content:space-around; color:#ffcc00; border-color:#554400;">
                <div>MTOW: 242T</div>
                <div>MLW: 185T</div>
                <div>MZFW: 175T</div>
            </div>

            <div class="section-header">DEPARTURE RUNWAY</div>
            <div class="input-row">
                <label style="color:#00bfff;">SELECT RWY</label>
                <select id="to-rwy-select" onchange="applyRunway('to')"><option value="">MANUAL INPUT</option></select>
            </div>
            <div style="text-align:right; margin-top:-8px; margin-bottom:8px; font-size:11px; color:#666;">
                ELEV: <span id="to-elev-disp" style="color:#00bfff;">0</span> FT
            </div>

            <div id="to-rwy-info" class="rwy-info-row" style="display:none;"></div>

            <div id="to-manual-data">
                <div class="input-row"><label>RWY LEN (FT)</label><input type="number" id="to-rwy-len" placeholder="10000" oninput="saveInputs()"></div>
                <div class="input-row"><label>RWY HDG</label><input type="number" id="to-rwy-hdg" placeholder="HDG" oninput="saveInputs()"></div>
                <div class="input-row"><label>RWY SLOPE (%)</label><input type="number" id="to-rwy-slope" placeholder="+0.0" step="0.1" oninput="saveInputs()"></div>
            </div>
            <div class="input-row"><label>RWY COND</label><select id="to-rwy-cond" onchange="saveInputs()"><option value="DRY">DRY</option><option value="WET">WET</option></select></div>
            <div class="input-row"><label>WIND (DIR/SPD)</label><div style="display:flex;gap:5px;width:55%;"><input type="number" id="to-wind-dir" placeholder="DIR" oninput="saveInputs()"><input type="number" id="to-wind-spd" placeholder="SPD" oninput="saveInputs()"></div></div>
            
            <div class="input-row"><label>OAT (Â°C)</label><input type="number" id="to-oat" placeholder="MANUAL" oninput="saveInputs()"></div>

            <div class="section-header">LOAD & FUEL (KG)</div>
            <div class="input-row"><label>PAX (77KG)</label><input type="number" id="pax-count" oninput="updatePaxWeight(); saveInputs();"></div>
            <div style="text-align:right; margin-top:-8px; margin-bottom:8px; font-size:11px; color:#666;">
                TOTAL PAX WT: <span id="pax-weight-disp" style="color:#00bfff;">0</span> KG
            </div>

            <div class="input-row"><label>CARGO FWD</label><input type="number" id="cargo-fwd" placeholder="KG" oninput="updateTotalCargo(); saveInputs();"></div>
            <div class="input-row"><label>CARGO AFT</label><input type="number" id="cargo-aft" placeholder="KG" oninput="updateTotalCargo(); saveInputs();"></div>
            <div class="input-row"><label>FUEL TOTAL</label><input type="number" id="fuel-total" placeholder="KG" oninput="saveInputs()"></div>
            <div class="input-row"><label style="color:#ff9900;">TRIP FUEL</label><input type="number" id="trip-fuel" placeholder="KG" style="border-color:#ff9900;" oninput="saveInputs()"></div>
            
            <input type="hidden" id="pax-weight"><input type="hidden" id="cargo-total">

            <button class="btn-calc" onclick="calculateTakeoff()">CALCULATE TAKEOFF</button>

            <div class="result-box">
                <div style="display:flex;justify-content:space-between;margin-bottom:10px;">
                    <span style="color:#888;font-size:12px;">TAKEOFF WEIGHT</span>
                    <span id="res-tow" style="font-size:14px;font-weight:bold;color:#fff;">--- KG</span>
                </div>
                
                <div class="perf-section">
                    <div class="perf-title" style="color:#00ff00;">TAKEOFF DATA</div>
                    
                    <div class="data-grid">
                        <div class="data-item"><div>CONFIG</div><div id="res-conf">1+F</div></div>
                        <div class="data-item"><div>FLEX</div><div id="res-flex" style="color:#00bfff;">--</div></div>
                        <div class="data-item"><div>N1</div><div id="res-n1" style="color:#00ff00;">--</div></div>
                    </div>
                    
                    <div style="border-bottom:1px solid #333;margin:8px 0;"></div>
                    
                    <div class="data-grid" style="grid-template-columns: 1fr 1fr;">
                        <div class="data-item"><div>TRIM (THS)</div><div id="res-trim">--</div></div>
                        <div class="data-item"><div>TOW CG</div><div id="res-tow-cg-display">--</div></div>
                    </div>

                    <div style="border-bottom:1px solid #333;margin:8px 0;"></div>

                    <div class="data-grid">
                        <div class="data-item"><div>V1</div><div id="res-v1" style="color:#e30a17;">--</div></div>
                        <div class="data-item"><div>VR</div><div id="res-vr" style="color:#e30a17;">--</div></div>
                        <div class="data-item"><div>V2</div><div id="res-v2" style="color:#e30a17;">--</div></div>
                    </div>
                    
                    <div style="border-bottom:1px solid #333;margin:8px 0;"></div>

                    <div style="display:flex; justify-content:space-between; padding:0 10px;">
                        <span style="font-size:10px;color:#888;">GREEN DOT (CLEAN)</span>
                        <span id="res-green-dot" style="font-size:14px;color:#00ff00;font-weight:bold;">--</span>
                    </div>

                    <div style="display:flex; justify-content:space-between; padding:0 10px; margin-top:5px;">
                        <span style="font-size:10px;color:#888;">EST TO DIST</span>
                        <span id="res-to-dist" style="font-size:14px;color:#fff;font-weight:bold;">-- FT</span>
                    </div>
                </div>
            </div>
            <div style="height:50px;"></div>
        </div>

        <div id="tab-landing" class="tab-content">
            <div class="current-flight-banner">
                <div style="font-size:12px;color:#aaa;">DESTINATION</div>
                <div id="ldg-flight-desc" style="color:#fff;font-weight:bold;font-size:12px;">NO FLIGHT</div>
            </div>

            <div class="section-header">ARRIVAL RUNWAY</div>
            <div class="input-row">
                <label style="color:#00bfff;">SELECT RWY</label>
                <select id="ldg-rwy-select" onchange="applyRunway('ldg')"><option value="">MANUAL INPUT</option></select>
            </div>
            <div style="text-align:right; margin-top:-8px; margin-bottom:8px; font-size:11px; color:#666;">
                ELEV: <span id="ldg-elev-disp" style="color:#00bfff;">0</span> FT
            </div>

            <div id="ldg-rwy-info" class="rwy-info-row" style="display:none;"></div>

            <div id="ldg-manual-data">
                <div class="input-row"><label>RWY LEN (FT)</label><input type="number" id="ldg-rwy-len" placeholder="10000" oninput="saveInputs()"></div>
                <div class="input-row"><label>RWY HDG</label><input type="number" id="ldg-rwy-hdg" placeholder="HDG" oninput="saveInputs()"></div>
                <div class="input-row"><label>RWY SLOPE (%)</label><input type="number" id="ldg-rwy-slope" placeholder="+0.0" step="0.1" oninput="saveInputs()"></div>
            </div>
            <div class="input-row"><label>RWY COND</label><select id="ldg-rwy-cond" onchange="saveInputs()"><option value="DRY">DRY</option><option value="WET">WET</option></select></div>
            <div class="input-row"><label>WIND (DIR/SPD)</label><div style="display:flex;gap:5px;width:55%;"><input type="number" id="ldg-wind-dir" placeholder="DIR" oninput="saveInputs()"><input type="number" id="ldg-wind-spd" placeholder="SPD" oninput="saveInputs()"></div></div>
            
            <div class="input-row">
                <label>REVERSER</label>
                <select id="ldg-rev" onchange="saveInputs()">
                    <option value="idle">IDLE REV</option>
                    <option value="max">MAX REV</option>
                </select>
            </div>

            <div class="section-header">WEIGHT (KG)</div>
            <div class="input-row"><label>CURRENT G.W</label><input type="number" id="ldg-gw-input" placeholder="e.g. 180500" oninput="saveInputs()"></div>

            <button class="btn-calc" onclick="calculateLanding()">CALCULATE LANDING</button>

            <div class="result-box">
                <div style="display:flex;justify-content:space-between;margin-bottom:5px;">
                    <span style="color:#888;font-size:12px;">EST. LANDING WEIGHT</span>
                    <span id="res-ldw" style="font-size:14px;font-weight:bold;color:#fff;">--- KG</span>
                </div>
                
                <div class="perf-section">
                    <div class="perf-title" style="color:#666;">PERFORMANCE MATRIX</div>
                    <div style="text-align:center; padding:20px; color:#444; font-size:12px; font-style:italic;">
                        Press CALCULATE to generate<br>Landing Distance Matrix (RLD)
                    </div>
                </div>
            </div>
            <div style="height:50px;"></div>
        </div>
    </div>

    <div class="bottom-nav">
        <button class="nav-btn active" onclick="switchTab('roster')" id="btn-roster"><span class="nav-icon">ðŸ“…</span><span>ROSTER</span></button>
        <button class="nav-btn" onclick="switchTab('takeoff')" id="btn-takeoff"><span class="nav-icon">ðŸ›«</span><span>TAKEOFF</span></button>
        <button class="nav-btn" onclick="switchTab('landing')" id="btn-landing"><span class="nav-icon">ðŸ›¬</span><span>LANDING</span></button>
    </div>
    
    <script src="app.js"></script>
</body>
</html>
